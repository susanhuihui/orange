<!doctype html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="images/C_132.png">
    <title>在线教育</title>
    <link href="b/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/otherstyle.css" />
    <link rel="stylesheet" href="css/jquery.range.css">
    <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" type="text/css" href="css/wangEditor.css">

    <link href="css/bootstrap-combined.no-icons.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/indextext.css" />
    <script src="js/jquery1.9.1.min.js" type="text/javascript"></script>
    <script src="b/js/bootstrap.min.js"></script>
    <script src="js/bootstrap-wysiwyg.js" type="text/javascript"></script>
    <script src="js/jquery.hotkeys.js" type="text/javascript"></script>
</head>

<body>
    <!--注册弹出层-->
    <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div style="height: 40px;">
                    <button type="button" style="margin-top: 15px;" class="close" data-dismiss="modal" aria-label="Close"><span style="padding: 20px;" aria-hidden="true">&times;</span></button>

                </div>
                <div class="row">
                    <div class="col-lg-1"></div>
                    <div class="col-lg-4 registered">
                        <a>我是<span>学生</span></a>
                        <p>名师学霸就在你身边</p>
                        <p>赶快注册与他们零距离交流吧!</p>
                        <a href="http://{{.Website}}/orange/Main/Registered/">
                            <input type="button" class="registeredbtn" value="学生注册">
                        </a>
                    </div>
                    <div class="col-lg-2">
                        <hr style="width: 1px; height: 90%; margin: 10 0 10 0;">
                    </div>
                    <div class="col-lg-4 tearegistered">
                        <a>我是<span>名校学霸</span></a>
                        <p>用你的知识开店</p>
                        <p>课外辅导必备赚钱神器!</p>
                        <a href="http://{{.Website}}/orange/Main/TechnoRegister/">
                            <input type="button" class="tearegisteredbtn" value="老师注册">
                        </a>
                    </div>
                    <div class="col-lg-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!--登录弹出层-->
    <div class="modal fade" id="loginpop" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <!--<form action="http://{{.Website}}/orange/Main/Logins/" method="post">-->
                <div class="modal-body">
                    <div id="tagContent">
                        <div class="tagContents selectTag" id="tagContent0">
                            <div class="form-group">
                                <label for="recipient-name" class="control-label">用户名:</label>
                                <input type="text" class="form-control" id="recipient-name" name="username">
                            </div>
                            <div class="form-group">
                                <label for="message-text" class="control-label">密码:</label>
                                <input type="password" class="form-control" id="recipient-pass" name="password" onkeypress="huichelogin()">
                            </div>
                            <div class="form-group">
                                <a href="http://{{.Website}}/orange/Main/RetrievePassword/">忘记密码</a>
                                <a href="http://{{.Website}}/orange/Main/Registered/" style="float: right;">注册新用户</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center;">
                    <button type="button" style="width: 50%;" onclick="loginbtn()" class="btn btn-warning">登录</button>
                    <!--<button type="submit" style="width: 50%; display:none;" class="btn btn-warning">登录</button>-->
                    <!--<button type="button" style="width:30%;"  class="btn btn-default" data-dismiss="modal">关闭</button>-->
                </div>
                <!--</form>-->
            </div>
        </div>
    </div>
    <div class="navbar-wrapper">
        <nav class="navbar navbar-inverse navbar-static-top menumaintables">
            <div style="max-width: 1000px; margin-left: auto; margin-right: auto;">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="logoa" href="http://{{.Website}}">
                        <img width="150px" src="images/logo.png" />
                    </a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav menumaintable" style="min-height: 57px;">
                        <li class="" id="shouye"><a href="http://{{.Website}}" style="" id="fontshouye">首页</a></li>
                        <li class="" id="laoshi"><a href="http://{{.Website}}/orange/Teacher/TeacherList/1&&&&&&1&10" id="fontlaoshi">找老师</a></li>
                        <li class="" id="wenda"><a href="http://{{.Website}}/orange/Main/QuestionsCenter/" id="fontwenda">问答中心</a></li>
                        <li>
                            <input class="form-control findtext" type="text"></li>
                        <li class="" id="lilogin"></li>
                        <li class="" id="lizhuce"></li>
                        <li style="display: none" id="outuser"><a onclick="outLoging()">退出登录</a></li>
                        <!--<li style="display: none" id="litupian"></li>
                    <li style="display: none" id="liusername"></li>-->
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!--删除弹出层-->
    <div class="modal fade" id="delmain" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 style="font-size: 16px; font-weight: bold;" class="modal-title">提示</h3>
                </div>
                <div class="modal-body" style="text-align: center; padding: 30px; font-size: 15px;">
                    对不起，您还没有建立授课关系的老师，不能进行提问！             
                </div>
                <div class="modal-footer" style="text-align: center;">
                    <a href="teacher.html" style="width: 30%;" class="btn btn-warning">去找老师</a>
                    <button type="button" style="width: 30%;" class="btn btn-default" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>
    <div id="bg" class="bg" style="display: none;"></div>
    <!--弹出层结束-->
    <div id="pagetopb">
        <!--个人资料-->
        <div class="container containers" style="margin-top: 20px; background-color: #FFFFFF;">
            <form method="post" action="http://{{.Website}}/orange/Teacher/UserAskQuestion/" enctype="multipart/form-data"  onsubmit="return check()">
            <div class=''>
                <div class="row problemtab">
                    <div class="col-sm-1 problemtablesspan">
                        <span>学科:</span>
                    </div>
                    <div class="col-sm-2 problemtables">
                        <select class="datestyle" id="selClass" onchange="getTeacher()" name="selClass">
                        </select>
                    </div>
                    <div class="col-sm-1 problemtablesspan">
                        老师:           
                    </div>
                    <div class="col-sm-2 problemtables">
                        <select class="datestyle" id="selteacher" name="selteacher">
                        </select>
                    </div>
                    <div class="col-sm-4 problemtables">
                        截止日期: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="date" class="datestyle" id="txtdate" name="txtdate">
                    </div>
                    <!--<div class="col-sm-1 problemtablesspan">
                        截止日期:
                    </div>
                    <div class="problemtables input-group date form_date col-md-2 col-xs-2" data-date="" data-date-format="" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                        <input style="background-color: #ffffff;" class="form-control" size="16" type="text" value="" readonly="true">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                    </div>-->
                </div>
                <div class="row problemtable">
                    <div class="col-sm-1" style="text-align: center;">
                        标题:                   
                    </div>
                    <div class="col-sm-11">
                        <input type="text" class="form-control protexts" id="txtTitle" name="txtTitle">
                    </div>
                </div>
                <div class="row problemtable">
                    <div id="myTabContent" class="tab-content" style="margin-top: 10px;">
                        <div class="tab-pane fade in active" id="home">

                            <div>
                                <div class="container">
                                    <div class="">
                                        <div id="alerts"></div>
                                        <div class="btn-toolbar" data-role="editor-toolbar" data-target="#editor">
                                            <!--<div class="btn-group">
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn dropdown-toggle linear" data-toggle="dropdown" title="Font"><i class="glyphicon glyphicon-font"></i>&nbsp;<b class="caret"></b></a>
                                                <ul class="dropdown-menu">
                                                </ul>
                                            </div>-->
                                           <!-- <div class="btn-group">
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn dropdown-toggle linear" data-toggle="dropdown" title="Font Size"><i class="glyphicon glyphicon-text-height"></i>&nbsp;<b class="caret"></b></a>
                                                <ul class="dropdown-menu">
                                                    <li><a data-edit="fontSize 5"><font size="5">大</font></a></li>
                                                    <li><a data-edit="fontSize 3"><font size="3">中</font></a></li>
                                                    <li><a data-edit="fontSize 1"><font size="1">小</font></a></li>
                                                </ul>
                                            </div>-->
                                            <!--<div class="btn-group">
                                                <a  class="btn linear" data-edit="bold" title="Bold (Ctrl/Cmd+B)"><i class="glyphicon-bold"></i></a>
                                                <a  class="btn linear" data-edit="italic" title="Italic (Ctrl/Cmd+I)"><i class="glyphicon glyphicon-italic"></i></a>
                                                <a  class="btn linear" data-edit="strikethrough" title="Strikethrough"><i style="font-size: 14px;">S</i></a>
                                                <a  class="btn linear" data-edit="underline" title="Underline (Ctrl/Cmd+U)"><i style="font-size: 14px;">U</i></a>
                                            </div>
                                            <div class="btn-group">
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="insertunorderedlist" title="Bullet list"><i class="glyphicon glyphicon-list"></i></a>
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="insertorderedlist" title="Number list"><i class="glyphicon glyphicon-align-justify"></i></a>
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="outdent" title="Reduce indent (Shift+Tab)"><i class="glyphicon glyphicon-indent-left"></i></a>
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="indent" title="Indent (Tab)"><i class="glyphicon glyphicon-indent-right"></i></a>
                                            </div>-->
                                            <!--<div class="btn-group">
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="justifyleft" title="Align Left (Ctrl/Cmd+L)"><i class="glyphicon glyphicon-align-left"></i></a>
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="justifycenter" title="Center (Ctrl/Cmd+E)"><i class="glyphicon glyphicon-align-center"></i></a>
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="justifyright" title="Align Right (Ctrl/Cmd+R)"><i class="glyphicon glyphicon-align-right"></i></a>
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="justifyfull" title="Justify (Ctrl/Cmd+J)"><i class="glyphicon glyphicon-align-justify"></i></a>
                                            </div>-->
                                            <!--<div class="btn-group">
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn dropdown-toggle linear" data-toggle="dropdown" title="Hyperlink"><i class="glyphicon glyphicon-link"></i></a>
                                                <div class="dropdown-menu input-append">
                                                    <input class="span2" placeholder="URL" type="text" data-edit="createLink" />
                                                    <button class="btn" type="button">Add</button>
                                                </div>
                                            </div>-->
                                            <div class="btn-group">
                                                <a class="btn linear" title="Insert picture (or just drag & drop)" id="pictureBtn"><i class="glyphicon glyphicon-picture">选择附件</i></a>
                                                <input type="file" data-role="magic-overlay" data-target="#pictureBtn" data-edit="insertImage" />
                                            </div>
                                           <!-- <div class="btn-group">
                                                <a style="border: 1px solid #ccc; background-color: #ff6a00;" class="btn linear" data-edit="undo" title="Undo (Ctrl/Cmd+Z)"><i class="glyphicon glyphicon-repeat"></i></a>
                                            </div>-->
                                            <input type="text" data-edit="inserttext" id="voiceBtn" x-webkit-speech="">
                                        </div>
                                        <div id="editor" style="margin-top: 15px;"></div>
                                    </div>
                                    <script>
                                        $(function () {
                                            function initToolbarBootstrapBindings() {
                                                var fonts = ['Serif', 'Sans', 'Arial', 'Arial Black', 'Courier',
                                                      'Courier New', 'Comic Sans MS', 'Helvetica', 'Impact', 'Lucida Grande', 'Lucida Sans', 'Tahoma', 'Times',
                                                      'Times New Roman', 'Verdana'],
                                                      fontTarget = $('[title=Font]').siblings('.dropdown-menu');
                                                $.each(fonts, function (idx, fontName) {
                                                    fontTarget.append($('<li><a data-edit="fontName ' + fontName + '" style="font-family:\'' + fontName + '\'">' + fontName + '</a></li>'));
                                                });
                                                $('a[title]').tooltip({ container: 'body' });
                                                $('.dropdown-menu input').click(function () { return false; })
                                                    .change(function () { $(this).parent('.dropdown-menu').siblings('.dropdown-toggle').dropdown('toggle'); })
                                                .keydown('esc', function () { this.value = ''; $(this).change(); });

                                                $('[data-role=magic-overlay]').each(function () {
                                                    var overlay = $(this), target = $(overlay.data('target'));
                                                    overlay.css('opacity', 0).css('position', 'absolute').offset(target.offset()).width(target.outerWidth()).height(target.outerHeight());
                                                });
                                                if ("onwebkitspeechchange" in document.createElement("input")) {
                                                    var editorOffset = $('#editor').offset();
                                                    $('#voiceBtn').css('position', 'absolute').offset({ top: editorOffset.top, left: editorOffset.left + $('#editor').innerWidth() - 35 });
                                                } else {
                                                    $('#voiceBtn').hide();
                                                }
                                            };
                                            function showErrorAlert(reason, detail) {
                                                var msg = '';
                                                if (reason === 'unsupported-file-type') { msg = "Unsupported format " + detail; }
                                                else {
                                                    console.log("error uploading file", reason, detail);
                                                }
                                                $('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>' +
                                                 '<strong>File upload error</strong> ' + msg + ' </div>').prependTo('#alerts');
                                            };
                                            initToolbarBootstrapBindings();
                                            $('#editor').wysiwyg({ fileUploadError: showErrorAlert });
                                        });
                                </script>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- <div class="row">
                    <div class="col-sm-2 tjfj">
                        <img style="height: 20px;" src="images/fj.png" /><a href="#" style="">添加附件</a>
                    </div>
                    <div class="col-sm-2 tjfj">
                        <input type="file" accept="image/*" id="file_image" name="file_image" style="display: block;" onchange="setImagePreview()" />
                    </div>
                    <div class="col-sm-8 tjfj">
                        <input type="submit" id="file_form" name="file_form" value="提交上传" style="display: block;" />
                    </div>
                    <div class="col-sm-12" style="border-bottom: 1px solid #ccc;">
                        <!--<div class="col-sm-3 tjfj" id="fujianlist">-->
                <!-- <img id="Img1" src="" style="display: none; width: 100px; height: 100px; float: left;" />
                        <img id="Img2" src="" style="display: none; width: 100px; height: 100px; float: left;" />
                        <img id="Img3" src="" style="display: none; width: 100px; height: 100px; float: left;" />
                        <img id="Img4" src="" style="display: none; width: 100px; height: 100px; float: left;" />
                        <img id="Img5" src="" style="display: none; width: 100px; height: 100px; float: left;" />-->
                <!--</div>-->
                <!--</div>
                </div>-->
                -->
                <div class="row">
                    <div class="col-sm-2" style="margin-top: 30px; height: 70px; text-align: right; color: #fc8b00; font-weight: bold; font-size: 16px;">
                        <span>问题奖励: </span>
                    </div>
                    <div class="col-sm-10" style="margin-top: 35px;">
                        <!--<img style="width: 190px;" src="images/gdt.png" />
                        <span style="font-size: 18px; color: #F9AE26;">3元 </span>-->
                        <input type="hidden" class="single-slider" value="5" name="selmoney"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12" style="text-align: center;">
                        <input type="submit" data-toggle="modal" class="evabtn btn btn-warning" style="width: 30%; margin-bottom: 15px;" value="提交"><!--onclick="submitQuestion()" -->
                    </div>
                </div>
            </div><input type="hidden" id="hiddencontent" value="" name="hiddencontent" />
                </form>
            <div class=" row profont">
                <p class="proknow">提问须知:</p>
                <p class="konwfont">
                    1.为了达到更好的效果，我们只提供为您讲过课的老师供您选择。        
                </p>
                <p class="konwfont">
                    2.请将您的问题以附件形式或文字形式提供给老师，以便老师能够更好的为您作答。              
                </p>
                <p class="konwfont">
                    3.问题结束后请及时给予评价，我们将根据您的建议来提高为您服务的水平。               
                </p>
                <p class="konwfont">
                    4.其它不确定事宜或者投诉请联系客服。                 
                </p>
            </div>
        </div>
    </div>
    {{template "footer.html" .}}   
    <!--<script src="b/js/jquery.min.js"></script>-->
    <script src="b/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/personal.js"></script>
    <script type="text/javascript" src="js/orange.js"></script>
    <script type="text/javascript" src="js/indexjs.js"></script>
    <script src="js/jquery.range.js"></script>
    <script src="jquery.range.js"></script>
    <script type="text/javascript" src="b/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
    <script type="text/javascript" src="b/js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
    <script type="text/javascript">
        $('.single-slider').jRange({
            from: 0,
            to: 20,
            step: 0.5,
            scale: [0, 5, 10, 15, 20],
            format: '%s',
            width: 400,
            showLabels: true,
            showScale: true
        });
        $("#g1").click(function () {
            var aa = $(".single-slider").val();
            //alert(aa);
        });
        $('.form_date').datetimepicker({
            language: 'zh-CN',
            weekStart: 1,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            minView: 2,
            forceParse: 0
        });


        var userid = getCookie("userid")//获取登录用户主键id

        function getuser() {
            //var username = "";
            var userid = getCookie("userid");
            //var getstudent = "http://{{.Website}}/orange/userinformation/GetUserinformationById/" + userid;
            //$.getJSON(getstudent, function (data) {
            if (userid != null && userid > 0 && userid != "undefined") {
                //username = getCookie("username");
                var identityid = getCookie("identityid");
                var AvatarPath = getCookie("AvatarPath");//data["AvatarPath"];
                //if (username + "" != "" && username + "" != "undefined") {
                var stuorteacher = "";
                if (identityid == 1) { //老师
                    stuorteacher = "http://{{.Website}}/orange/Main/UserTeacher/0";
                } else if (identityid == 2 || identityid == 3) {//学生|家长
                    stuorteacher = "http://{{.Website}}/orange/Main/UserStudent/0";
                } else if (identityid == 4) {
                    stuorteacher = "http://{{.Website}}/orange/Main/OwnerUser/";
                }
                document.getElementById("lizhuce").innerHTML = '<a data-toggle="modal" href="' + stuorteacher + '" id="loginusername"></a>';
                if (AvatarPath != null && AvatarPath + "" != "" && AvatarPath + "" != "undefined") {
                    document.getElementById("lilogin").innerHTML = '<a data-toggle="modal" href="' + stuorteacher + '" ><img id="userHead" style="height: 23px;" src="' + AvatarPath + '" /></a>';
                } else {
                    document.getElementById("lilogin").innerHTML = '<a data-toggle="modal" href="' + stuorteacher + '" ><img id="userHead" style="height: 23px;" src="images/denglu.png" /></a>';
                }
                document.getElementById("outuser").style.display = "block";
                //} else {
                //    document.getElementById("lilogin").innerHTML = '<a data-toggle="modal" data-target="#loginpop"id="fontdenglu"><img style="height: 23px;" src="images/denglu.png" />登录</a>';
                //    document.getElementById("lizhuce").innerHTML = '<a data-toggle="modal" data-target=".bs-example-modal-lg" id="fontzhuce"><img style="height: 23px;" src="images/zhuce.png" />注册</a>';
                //}
            } else {
                document.getElementById("lilogin").innerHTML = '<a data-toggle="modal" data-target="#loginpop" id="fontdenglu"><img style="height: 23px;" src="images/denglu.png" />登录</a>';
                document.getElementById("lizhuce").innerHTML = '<a data-toggle="modal" data-target=".bs-example-modal-lg" id="fontzhuce"><img style="height: 23px;" src="images/zhuce.png" />注册</a>';
            }
            //});           
        }

        //退出登录
        function outLoging() {
            clearCookie("userid");
            var outurl = "http://{{.Website}}/orange/Main/OutLogins/";
            $.getJSON(outurl, function (data) {
                if (data == "OK") {
                    window.location.href = "http://{{.Website}}/";
                } else {
                    window.location.href = "http://{{.Website}}/";
                }
            });
        }

        window.onload = function () {
            getuser();
            setTitleOnSelect(3);
            if (userid == null || userid <= 0) {
                window.location.href = "http://{{.Website}}/";
            }
            chushi();
        }

        function chushi() {
            //var allteacher = "http://{{.Website}}/orange/onlinecourserecord/GetOnlinecourserecordTeacherByUid/" + userid;
            //$.getJSON(allteacher, function (datateacher) {
            //    var teachername = '<option value=0">请选择</option>';
            //    if (datateacher != null) {
            //        for (var i = 0; i < datateacher.length ; i++) {
            //            var itmeop = '<option value="' + datateacher[i]["UserIdPassive"] + '">' + datateacher[i]["UserName"] + '</option>';
            //            teachername = teachername + itmeop;
            //        }
            //        document.getElementById("selteacher").innerHTML = "";
            //        $("#selteacher").append(teachername);
            //    } else {
            //        document.getElementById("selteacher").innerHTML = "";
            //    }
            //});
            var allClass = "http://{{.Website}}/orange/course/GetAllCourse/1/100/";
            $.getJSON(allClass, function (datacour) {
                var allclassstr = '<option value=0">请选择</option>';
                for (var j = 0; j < datacour.length; j++) {
                    var itmecour = '<option value="' + datacour[j]["Id"] + '">' + datacour[j]["CourseName"] + '</option>';
                    allclassstr = allclassstr + itmecour;
                }
                document.getElementById("selClass").innerHTML = "";
                $("#selClass").append(allclassstr);
            });
        }

        //根据学科选择教过自己的老师
        function getTeacher() {
            var selectIndex = document.getElementById("selClass").selectedIndex;
            var selClassid = document.getElementById("selClass").options[selectIndex].value;
            if (selClassid == "0") {
                document.getElementById("selteacher").innerHTML = "";
                $("#selteacher").append(teachername);
            } else {
                var allteacher = "http://{{.Website}}/orange/onlinecourserecord/GetOnlinecourserecordTeacherByUCid/" + userid + "/" + selClassid;
                $.getJSON(allteacher, function (datateacher) {
                    var teachername = '';//'<option value=0">请选择</option>';
                    if (datateacher != null) {
                        for (var i = 0; i < datateacher.length ; i++) {
                            var itmeop = '<option value="' + datateacher[i]["UserIdPassive"] + '">' + datateacher[i]["UserName"] + '</option>';
                            teachername = teachername + itmeop;
                        }
                        document.getElementById("selteacher").innerHTML = "";
                        $("#selteacher").append(teachername);
                    } else {
                        document.getElementById("selteacher").innerHTML = "";
                    }
                });
            }
        }

        //提交提问信息
        function submitQuestion() {
            var tiwenuserid = userid;//学生id
            var laoshiid = document.getElementById("selteacher").value;
            var classid = document.getElementById("selClass").value;
            var title = trim(document.getElementById("txtTitle").value);
            //var contents = trim(document.getElementById("txtContents").value); 
            var contents = document.getElementById("editor").innerHTML;
            document.getElementById("hiddencontent").value = contents;
            var newcontent = document.getElementById("hiddencontent").value; 
            var money = $(".single-slider").val();
            var date = document.getElementById("txtdate").value;
            //var time = document.getElementById("txttime").value;
            //获取余额是否足够支付问题
            if (laoshiid == null || laoshiid == "" || laoshiid <= 0) {
                alert("请选择要提问的老师！");
                return;
            }
            if (date == "") { alert("请正确输入提问截止日期！"); return; }
            var timesave = new Date(getInsertDate(date + " " + "00:00:00"));
            var timenows = new Date();
            if (timesave < timenows) { alert("提问截止日期必须大于当前日期！"); return; }
            if (title == "") { alert("提问标题不能为空，请输入提问标题！"); return; }
            if (trim(contents) == "") { alert("提问内容不能为空，请输入提问内容！"); return; }
            var getyue = "http://{{.Website}}/orange/accountfunds/GetAccountfundsByuid/" + userid;
            $.getJSON(getyue, function (getdate) {
                if (getdate != null) {
                    if (getdate["Balance"] >= money) {
                        var time = new Date(getInsertDate(date + " " + "00:00:00"));
                        var str = "";
                        if (time != null) { str = getInsertDate(date + " " + "00:00:00"); } else { str = getInsertNowDate(); }
                        var addquestion = '{"AskUserId":' + tiwenuserid +
                                          ',"AnswerUserId":' + laoshiid +
                                          ',"GCId":' + classid +
                                          ',"Title":"' + title +
                                          '","Contents":"' + newcontent +
                                          '","BadeTime":"' + getInsertNowDate() +
                                          '","EndTime":"' + str +
                                          '","AmountMoney":' + money +
                                          ',"IsSee":0' +
                                          '}';
                        //alert(addquestion);
                        $.post("http://{{.Website}}/orange/questionask/AddQuestionask/", addquestion,
                            function (data) {
                                if (data["id"] > 0) {
                                    var adddongjie = '{"UserId":' + tiwenuserid +
                                                                ',"FrozenMoney":' + money +
                                                                ',"FrozenType":1' +
                                                                ',"BusinessId":' + data["id"] +
                                                                ',"FrozenTime":"' + getInsertNowDate() +
                                                                '","FrozenState":1' +
                                                                '}';
                                    $.post("http://{{.Website}}/orange/frozenfunds/AddUserFrozenfunds/", adddongjie,
                                        function (data) {
                                            if (data["id"] > 0) {
                                            }
                                        });
                                    alert("提问成功！");
                                    window.location.href = "http://{{.Website}}/orange/Teacher/UserAskQuestion/";
                                } else {
                                    alert("提问失败！");
                                }
                            });
                    } else {
                        alert("账户余额不足，不能满足此次提问消费，请先充值！");
                    }
                } else {
                    alert("没有账户信息！");
                }
            });
        }
        var nowpiccount = 1;
        function setImagePreview() {
            var docObj = document.getElementById("file_image");
            if (window.URL.createObjectURL(docObj.files[0]) != null) {
                var imgObjPreview = document.getElementById("Img" + nowpiccount);
                imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
                document.getElementById("Img" + nowpiccount).style.display = "block";
                nowpiccount = nowpiccount + 1;
                return true;
            }
        }



        function check() {
            var tiwenuserid = userid;//学生id
            var laoshiid = document.getElementById("selteacher").value;
            var classid = document.getElementById("selClass").value;
            var title = trim(document.getElementById("txtTitle").value);
            //var contents = trim(document.getElementById("txtContents").value); 
            var contents = document.getElementById("editor").innerHTML;
            document.getElementById("hiddencontent").value = contents;
            var newcontent = document.getElementById("hiddencontent").value;
            var money = $(".single-slider").val();
            var date = document.getElementById("txtdate").value;
            //var time = document.getElementById("txttime").value;
            //获取余额是否足够支付问题
            if (laoshiid == null || laoshiid == "" || laoshiid <= 0) {
                alert("请选择要提问的老师！");
                return false;
            }
            if (date == "") { alert("请正确输入提问截止日期！"); return false; }
            var timesave = new Date(getInsertDate(date + " " + "00:00:00"));
            var timenows = new Date();
            if (timesave < timenows) { alert("提问截止日期必须大于当前日期！"); return false; }
            if (title == "") { alert("提问标题不能为空，请输入提问标题！"); return false; }
            if (trim(contents) == "") { alert("提问内容不能为空，请输入提问内容！"); return false; }
        }
    </script>

    <script type="text/javascript">
        (function (W, D) {
            var fileForm = document.getElementById("file_form");
            var fileImage = document.getElementById("file_image");
            function testAjax(files, i) {
                if (i < 0) {
                    return;
                }
                var xhr = new XMLHttpRequest(),
                     data = new FormData();
                xhr.onload = function () {
                    // 递归
                    testAjax(files, --i);
                };
                //alert(files[i]);
                data.append("file1", files[i]);
                xhr.open("post", "http://{{.Website}}/orange/courseware/AddCoursewareOnbook/" + nowTagid, true);
                xhr.send(data);
            }
            fileForm.addEventListener("click", function (e) {
                e.preventDefault();
                var files = fileImage.files;
                testAjax(files, --files.length);
            }, false);
        })(window, document);
    </script>
</body>
</html>
